name = "lot-platform"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "lot-db"
database_id = "xxxx-xxxx-xxxx-xxxx" # Replace after: wrangler d1 create lot-db

# KV Namespace (sessions, rate limits, cache)
[[kv_namespaces]]
binding = "KV"
id = "xxxx" # Replace after: wrangler kv:namespace create LOT_KV

# R2 Bucket (media storage)
[[r2_buckets]]
binding = "MEDIA"
bucket_name = "lot-media"

# Queue (async jobs: rewards, notifications)
[[queues.producers]]
queue = "lot-rewards"
binding = "REWARDS_QUEUE"

[[queues.consumers]]
queue = "lot-rewards"
max_batch_size = 10
max_batch_timeout = 30

# Environment variables (secrets should use wrangler secret put)
[vars]
ENVIRONMENT = "development"
